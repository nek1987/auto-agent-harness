{
  "schema_version": "2.0",
  "meta": {
    "generated_at": "2026-01-11T07:22:19.721Z",
    "slug": "anthropics-stripe-best-practices",
    "source_url": "https://github.com/anthropics/claude-plugins-official/tree/main/external_plugins/stripe/skills/stripe-best-practices",
    "source_ref": "main",
    "model": "claude",
    "analysis_version": "3.0.0",
    "source_type": "community",
    "content_hash": "1a5b300345a58d087f481d0ecea5e062fceb74829142fb98e2cd79acc22c43c7",
    "tree_hash": "3947c418255c75971e425a3da408d6db873e3124f6aabc525c0e38ff3b7102f2"
  },
  "skill": {
    "name": "stripe-best-practices",
    "description": "Best practices for building Stripe integrations. Use when implementing payment processing, checkout flows, subscriptions, webhooks, Connect platforms, or any Stripe API integration.",
    "summary": "Best practices for building Stripe integrations. Use when implementing payment processing, checkout ...",
    "icon": "ðŸ“¦",
    "version": "1.0.0",
    "author": "anthropics",
    "license": "MIT",
    "tags": [
      "stripe-best-practices",
      "ai",
      "skill",
      "claude"
    ],
    "supported_tools": [
      "claude",
      "codex",
      "claude-code"
    ],
    "risk_factors": [
      "network"
    ]
  },
  "security_audit": {
    "risk_level": "medium",
    "is_blocked": false,
    "safe_to_publish": false,
    "summary": "AI analysis failed after multiple attempts - MANUAL REVIEW REQUIRED before publishing. This skill cannot be auto-published until reviewed by a human.",
    "risk_factor_evidence": [
      {
        "factor": "network",
        "evidence": [
          {
            "file": "SKILL.md",
            "line_start": 6,
            "line_end": 6
          },
          {
            "file": "SKILL.md",
            "line_start": 7,
            "line_end": 7
          },
          {
            "file": "SKILL.md",
            "line_start": 8,
            "line_end": 8
          },
          {
            "file": "SKILL.md",
            "line_start": 12,
            "line_end": 12
          },
          {
            "file": "SKILL.md",
            "line_start": 12,
            "line_end": 12
          },
          {
            "file": "SKILL.md",
            "line_start": 14,
            "line_end": 14
          },
          {
            "file": "SKILL.md",
            "line_start": 16,
            "line_end": 16
          },
          {
            "file": "SKILL.md",
            "line_start": 16,
            "line_end": 16
          },
          {
            "file": "SKILL.md",
            "line_start": 18,
            "line_end": 18
          },
          {
            "file": "SKILL.md",
            "line_start": 20,
            "line_end": 20
          },
          {
            "file": "SKILL.md",
            "line_start": 20,
            "line_end": 20
          },
          {
            "file": "SKILL.md",
            "line_start": 20,
            "line_end": 20
          },
          {
            "file": "SKILL.md",
            "line_start": 20,
            "line_end": 20
          },
          {
            "file": "SKILL.md",
            "line_start": 24,
            "line_end": 24
          },
          {
            "file": "SKILL.md",
            "line_start": 26,
            "line_end": 26
          },
          {
            "file": "SKILL.md",
            "line_start": 26,
            "line_end": 26
          },
          {
            "file": "SKILL.md",
            "line_start": 28,
            "line_end": 28
          },
          {
            "file": "SKILL.md",
            "line_start": 28,
            "line_end": 28
          },
          {
            "file": "SKILL.md",
            "line_start": 28,
            "line_end": 28
          },
          {
            "file": "SKILL.md",
            "line_start": 30,
            "line_end": 30
          },
          {
            "file": "SKILL.md",
            "line_start": 30,
            "line_end": 30
          },
          {
            "file": "SKILL.md",
            "line_start": 30,
            "line_end": 30
          },
          {
            "file": "SKILL.md",
            "line_start": 30,
            "line_end": 30
          }
        ]
      }
    ],
    "critical_findings": [],
    "high_findings": [],
    "medium_findings": [],
    "low_findings": [],
    "dangerous_patterns": [
      {
        "title": "Hardcoded URL",
        "description": "Hardcoded URL detected in code",
        "locations": [
          {
            "file": "SKILL.md",
            "line_start": 6,
            "line_end": 6
          },
          {
            "file": "SKILL.md",
            "line_start": 7,
            "line_end": 7
          },
          {
            "file": "SKILL.md",
            "line_start": 8,
            "line_end": 8
          },
          {
            "file": "SKILL.md",
            "line_start": 12,
            "line_end": 12
          },
          {
            "file": "SKILL.md",
            "line_start": 12,
            "line_end": 12
          },
          {
            "file": "SKILL.md",
            "line_start": 14,
            "line_end": 14
          },
          {
            "file": "SKILL.md",
            "line_start": 16,
            "line_end": 16
          },
          {
            "file": "SKILL.md",
            "line_start": 16,
            "line_end": 16
          },
          {
            "file": "SKILL.md",
            "line_start": 18,
            "line_end": 18
          },
          {
            "file": "SKILL.md",
            "line_start": 20,
            "line_end": 20
          },
          {
            "file": "SKILL.md",
            "line_start": 20,
            "line_end": 20
          },
          {
            "file": "SKILL.md",
            "line_start": 20,
            "line_end": 20
          },
          {
            "file": "SKILL.md",
            "line_start": 20,
            "line_end": 20
          },
          {
            "file": "SKILL.md",
            "line_start": 24,
            "line_end": 24
          },
          {
            "file": "SKILL.md",
            "line_start": 26,
            "line_end": 26
          },
          {
            "file": "SKILL.md",
            "line_start": 26,
            "line_end": 26
          },
          {
            "file": "SKILL.md",
            "line_start": 28,
            "line_end": 28
          },
          {
            "file": "SKILL.md",
            "line_start": 28,
            "line_end": 28
          },
          {
            "file": "SKILL.md",
            "line_start": 28,
            "line_end": 28
          },
          {
            "file": "SKILL.md",
            "line_start": 30,
            "line_end": 30
          },
          {
            "file": "SKILL.md",
            "line_start": 30,
            "line_end": 30
          },
          {
            "file": "SKILL.md",
            "line_start": 30,
            "line_end": 30
          },
          {
            "file": "SKILL.md",
            "line_start": 30,
            "line_end": 30
          }
        ]
      },
      {
        "title": "Weak cryptographic algorithm",
        "description": "Weak cryptographic algorithm detected in code",
        "locations": [
          {
            "file": "SKILL.md",
            "line_start": 3,
            "line_end": 3
          },
          {
            "file": "SKILL.md",
            "line_start": 6,
            "line_end": 6
          },
          {
            "file": "SKILL.md",
            "line_start": 28,
            "line_end": 28
          },
          {
            "file": "SKILL.md",
            "line_start": 30,
            "line_end": 30
          },
          {
            "file": "SKILL.md",
            "line_start": 30,
            "line_end": 30
          }
        ]
      },
      {
        "title": "System reconnaissance",
        "description": "System reconnaissance detected in code",
        "locations": [
          {
            "file": "SKILL.md",
            "line_start": 20,
            "line_end": 20
          }
        ]
      }
    ],
    "files_scanned": 1,
    "total_lines": 31,
    "audit_model": "claude",
    "audited_at": "2026-01-11T07:22:19.721Z"
  },
  "content": {
    "user_title": "Stripe Best Practices",
    "value_statement": "An AI skill for Claude, Codex, and Claude Code",
    "seo_keywords": [
      "stripe-best-practices",
      "ai",
      "skill",
      "claude"
    ],
    "actual_capabilities": [
      "Provides best practices for implementing payment processing with Stripe",
      "Guides on choosing the right Stripe API (CheckoutSessions, PaymentIntents, SetupIntents)",
      "Recommends Stripe-hosted checkout and embedded checkout options",
      "Advises on Payment Element usage and migration from legacy Card Element",
      "Offers guidance for subscription and SaaS billing integrations",
      "Provides recommendations for Stripe Connect platform implementations",
      "Helps avoid deprecated APIs (Sources, Tokens, Charges) and suggests migrations"
    ],
    "limitations": [
      "Does not provide code examples or implementation templates",
      "Does not replace official Stripe documentation for specific API parameters",
      "Does not cover PCI compliance certification requirements",
      "Does not provide integration testing or debugging assistance"
    ],
    "use_cases": [
      {
        "title": "Implementing payment processing",
        "description": "Choosing between CheckoutSessions and PaymentIntents for on-session and off-session payments"
      },
      {
        "title": "Building checkout flows",
        "description": "Deciding between Stripe-hosted checkout, embedded checkout, or Payment Element for custom UIs"
      },
      {
        "title": "Setting up subscriptions",
        "description": "Using Billing APIs with Stripe Checkout for recurring revenue models like SaaS"
      },
      {
        "title": "Building platform integrations",
        "description": "Following Stripe Connect integration recommendations for platforms managing fund flows"
      },
      {
        "title": "Migrating from legacy APIs",
        "description": "Moving from deprecated APIs like Charges, Sources, and Tokens to modern alternatives"
      }
    ],
    "prompt_templates": [
      {
        "title": "Payment API selection",
        "prompt": "I need to implement payment processing for [use case: on-session one-time payments / off-session recurring payments]. What Stripe API should I use and why?",
        "scenario": "Choosing the right Stripe API for a payment implementation"
      },
      {
        "title": "Checkout option selection",
        "prompt": "I'm building a checkout flow for [product type]. Should I use Stripe-hosted checkout, embedded checkout, or the Payment Element? What are the trade-offs?",
        "scenario": "Deciding on checkout implementation approach"
      },
      {
        "title": "Subscription implementation",
        "prompt": "I'm building a [SaaS / subscription] business model. How should I integrate Stripe Billing with my frontend checkout?",
        "scenario": "Implementing subscription billing with Stripe"
      },
      {
        "title": "Connect platform setup",
        "prompt": "I'm building a platform that needs to process payments on behalf of users. Should I use direct charges or destination charges with Stripe Connect?",
        "scenario": "Setting up Stripe Connect for platform integrations"
      },
      {
        "title": "Legacy API migration",
        "prompt": "My current integration uses the [Charges API / Sources API / Card Element]. What is the recommended migration path to modern Stripe APIs?",
        "scenario": "Migrating from deprecated Stripe APIs"
      }
    ],
    "output_examples": [
      {
        "input": "I want to implement a simple one-time payment for my e-commerce store.",
        "output": [
          "Use the CheckoutSessions API for on-session payments - it's Stripe's primary API for modelling payments and supports taxes, discounts, and multiple payment methods.",
          "Prefer Stripe-hosted checkout or embedded checkout for the frontend unless you need advanced customization.",
          "For a basic e-commerce flow: Create a Checkout Session with line items, then redirect to Stripe's hosted checkout page or render the embedded checkout.",
          "Stripe will handle payment method display based on the customer's location automatically if dynamic payment methods are enabled.",
          "See: https://docs.stripe.com/payments/checkout for implementation details."
        ]
      },
      {
        "input": "How should I implement subscriptions for my SaaS product?",
        "output": [
          "Use Stripe Billing APIs combined with Stripe Checkout for the frontend subscription flow.",
          "Follow the Subscription Use Cases at https://docs.stripe.com/billing/subscriptions/use-cases.md, especially the SaaS pattern.",
          "Design your integration using https://docs.stripe.com/billing/subscriptions/designing-integration.md.",
          "Create products and prices in Stripe, then use Checkout Sessions with mode: 'subscription'.",
          "Avoid directly integrating PaymentIntents for subscription flows - use the Billing APIs instead."
        ]
      },
      {
        "input": "What's the difference between direct charges and destination charges for my platform?",
        "output": [
          "Direct Charges: Stripe charges the connected account directly. The platform has no Stripe liability. Use when the platform doesn't want to be involved in disputes.",
          "Destination Charges: Charges are created on the platform, then transferred to the connected account. The platform accepts liability for negative balances.",
          "Use direct charges if Stripe should take the risk, destination charges if your platform accepts liability.",
          "Never mix charge types in the same integration.",
          "See: https://docs.stripe.com/connect/integration-recommendations.md"
        ]
      }
    ],
    "best_practices": [
      "Always use the latest version of Stripe API and SDK unless the user specifies otherwise",
      "Default to CheckoutSessions API for on-session payments over PaymentIntents or Charges API",
      "Prefer Stripe-hosted checkout or embedded checkout for payment flows",
      "Use Payment Element only when advanced customization is needed, never the legacy Card Element",
      "Enable dynamic payment methods in Stripe dashboard instead of hardcoding payment_method_types",
      "Use Billing APIs combined with Checkout for subscription/SaaS models",
      "Follow Connect integration recommendations when building platforms with fund flows",
      "Use SetupIntent API to save payment methods for future use, not the Sources API",
      "Review the Go Live Checklist before deploying to production"
    ],
    "anti_patterns": [
      "Recommending the Charges API instead of CheckoutSessions or PaymentIntents",
      "Using the legacy Card Element or Payment Element in card mode",
      "Using deprecated APIs (Sources API, Tokens API, Charges API) for new integrations",
      "Hardcoding payment_method_types instead of using dynamic payment methods",
      "Mixing direct charges and destination charges in the same Connect integration",
      "Using PaymentIntents for subscription flows instead of Billing APIs",
      "Not reviewing the Go Live Checklist before going live"
    ],
    "faq": [
      {
        "question": "What is the difference between CheckoutSessions and PaymentIntents?",
        "answer": "CheckoutSessions is Stripe's primary API for modelling on-session payments, supporting one-time payments, subscriptions, taxes, and discounts. PaymentIntents is better for off-session payments or when you need to model checkout state yourself. Default to CheckoutSessions unless you have a specific need for PaymentIntents."
      },
      {
        "question": "Should I use Stripe-hosted checkout or embedded checkout?",
        "answer": "Prefer Stripe-hosted checkout for the simplest integration - Stripe handles the entire payment page. Use embedded checkout if you need the payment UI within your site but still want Stripe to handle input validation and PCI compliance. Use Payment Element only when you need advanced customization beyond what embedded checkout offers."
      },
      {
        "question": "How do I handle payment methods dynamically?",
        "answer": "Enable dynamic payment methods in your Stripe dashboard settings. This allows Stripe to automatically choose the best payment methods based on each customer's location, wallets, and preferences. Avoid passing specific payment_method_types in API calls unless absolutely necessary."
      },
      {
        "question": "What should I use for subscription billing?",
        "answer": "Use Stripe Billing APIs combined with Stripe Checkout. Create products and prices in Stripe, then use Checkout Sessions with mode: 'subscription'. This handles the entire subscription lifecycle including renewals, cancellations, and proration. See https://docs.stripe.com/billing/subscriptions/designing-integration.md"
      },
      {
        "question": "How do I migrate from the Charges API?",
        "answer": "Migrate to CheckoutSessions for new payment flows or PaymentIntents for more control. The migration guide is at https://docs.stripe.com/payments/payment-intents/migration/charges.md. Key changes include using PaymentIntents for authorization and capture, handling 3D Secure automatically, and accessing richer payment method options."
      }
    ]
  },
  "file_structure": [
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "SKILL.md"
    }
  ]
}
